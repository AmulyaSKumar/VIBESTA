{% extends "base.html" %}

{% block title %}VIBESTA - Festival Information Hub{% endblock %}

{% block extra_head %}
<style>
    .hero-pattern {
        background-color: #f8f9fa;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.343-3 3 1.343 3 3 3zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ff6b6b' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
    }
    
    .festival-light {
        position: absolute;
        border-radius: 50%;
        filter: blur(60px);
        z-index: 0;
        animation: pulse 4s infinite alternate;
    }
    
    @keyframes pulse {
        0% { opacity: 0.5; transform: scale(1); }
        100% { opacity: 0.8; transform: scale(1.2); }
    }
    
    .diya-flame {
        position: absolute;
        width: 20px;
        height: 30px;
        background: radial-gradient(ellipse at bottom, #FFD166 0%, #FF6B6B 60%, transparent 100%);
        border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        filter: blur(4px);
        transform-origin: center bottom;
        animation: flicker 3s infinite alternate;
    }
    
    @keyframes flicker {
        0%, 100% { transform: scale(1.0); opacity: 0.8; }
        50% { transform: scale(0.8); opacity: 0.6; }
        80% { transform: scale(1.2); opacity: 1; }
    }
    
    .festival-image {
        transition: all 0.5s ease;
        clip-path: polygon(0% 0%, 100% 0%, 100% 85%, 85% 100%, 0% 100%);
    }
    
    .festival-image:hover {
        transform: scale(1.05) rotate(1deg);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative overflow-hidden rounded-3xl mb-16 bg-gradient-to-br from-festival-dark/95 to-festival-dark shadow-2xl">
    <!-- Decorative lights -->
    <div class="festival-light bg-festival-primary/40 w-64 h-64 -top-20 -left-20"></div>
    <div class="festival-light bg-festival-secondary/40 w-72 h-72 top-40 -right-20"></div>
    <div class="festival-light bg-festival-accent/30 w-56 h-56 -bottom-20 left-1/3"></div>
    
    <!-- Festival icons -->
    <div class="absolute top-10 left-[10%] text-4xl opacity-70 festival-icon animate-bounce-slow">âœ¨</div>
    <div class="absolute bottom-10 right-[15%] text-4xl opacity-70 festival-icon" style="animation-delay: 1.2s;">ðŸŽŠ</div>
    <div class="absolute top-1/3 right-[10%] text-3xl opacity-70 festival-icon" style="animation-delay: 0.8s;">ðŸª”</div>
    
    <div class="container mx-auto px-6 py-16 relative z-10">
        <div class="flex flex-col lg:flex-row items-center justify-between gap-12">
            <div class="lg:w-1/2 text-center lg:text-left">
                <div class="inline-block mb-4 px-4 py-1 bg-white/10 backdrop-blur-sm rounded-full text-festival-secondary text-sm font-medium">
                    <span class="flex items-center">
                        <span class="h-2 w-2 rounded-full bg-festival-secondary animate-pulse mr-2"></span>
                        Discover world cultures through celebrations
                    </span>
                </div>
                
                <h1 class="text-4xl md:text-5xl lg:text-6xl font-display font-bold mb-6 text-white leading-tight">
                    Celebrate <span class="relative inline-block">
                        Cultural
                        <span class="absolute -bottom-2 left-0 w-full h-2 bg-gradient-to-r from-festival-primary via-festival-secondary to-festival-accent rounded-full"></span>
                    </span> Diversity
                </h1>
                
                <p class="text-lg text-gray-300 mb-8 max-w-xl">
                    Immerse yourself in the vibrant world of cultural celebrations. Discover, learn, and share authentic festival experiences from around the globe.
                </p>
                
                <div class="flex flex-wrap justify-center lg:justify-start gap-5">
                    <a href="/search" class="btn-festival group">
                        <i class="fas fa-search mr-2 group-hover:animate-bounce"></i> Explore Festivals
                    </a>
                    <a href="/upload" class="px-6 py-4 bg-white/10 backdrop-blur-sm text-white rounded-xl font-medium hover:bg-white/20 transition shadow-md flex items-center border border-white/20">
                        <i class="fas fa-upload mr-2 festival-icon-fast"></i> Share Experience
                    </a>
                </div>
            </div>
            
            <div class="lg:w-1/2 relative">
                <div class="absolute inset-0 bg-gradient-to-br from-festival-primary/20 to-festival-secondary/20 rounded-3xl transform rotate-3 scale-[0.97] blur-sm"></div>
                <div class="relative z-10 grid grid-cols-2 gap-4">
                    <div class="relative overflow-hidden">
                        <img src="https://source.unsplash.com/featured/?diwali" alt="Festival Image" class="festival-image rounded-xl shadow-lg w-full h-64 object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl"></div>
                        <div class="absolute bottom-3 left-3 text-white font-medium text-sm">Diwali</div>
                        <div class="absolute top-3 right-3 text-2xl festival-icon">ðŸª”</div>
                    </div>
                    
                    <div class="relative mt-8 overflow-hidden">
                        <img src="https://source.unsplash.com/featured/?holi" alt="Festival Image" class="festival-image rounded-xl shadow-lg w-full h-64 object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl"></div>
                        <div class="absolute bottom-3 left-3 text-white font-medium text-sm">Holi</div>
                        <div class="absolute top-3 right-3 text-2xl festival-icon">ðŸŽ¨</div>
                    </div>
                    
                    <div class="relative overflow-hidden">
                        <img src="https://source.unsplash.com/featured/?christmas" alt="Festival Image" class="festival-image rounded-xl shadow-lg w-full h-64 object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl"></div>
                        <div class="absolute bottom-3 left-3 text-white font-medium text-sm">Christmas</div>
                        <div class="absolute top-3 right-3 text-2xl festival-icon">ðŸŽ„</div>
                    </div>
                    
                    <div class="relative mt-8 overflow-hidden">
                        <img src="https://source.unsplash.com/featured/?festival" alt="Festival Image" class="festival-image rounded-xl shadow-lg w-full h-64 object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl"></div>
                        <div class="absolute bottom-3 left-3 text-white font-medium text-sm">Carnival</div>
                        <div class="absolute top-3 right-3 text-2xl festival-icon">ðŸŽ­</div>
                    </div>
                </div>
                
                <!-- Animated diya flames -->
                <div class="diya-flame absolute top-[16%] right-[8%]"></div>
                <div class="diya-flame absolute top-[42%] left-[10%]" style="animation-delay: 0.5s;"></div>
                <div class="diya-flame absolute bottom-[18%] right-[12%]" style="animation-delay: 1s;"></div>
            </div>
        </div>
    </div>
    
    <!-- Decorative bottom wave -->
    <div class="absolute bottom-0 left-0 w-full overflow-hidden">
        <svg class="relative block w-full h-12 text-festival-light" viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V120H0V100.6c57-9.92,115-24,171.19-29.23Z" fill="currentColor"/>
        </svg>
    </div>
</section>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Main Content -->
    <div class="lg:col-span-2">
        <div class="flex items-center mb-8">
            <div class="text-3xl text-festival-primary mr-3 festival-icon">ðŸŽŠ</div>
            <h2 class="text-2xl md:text-3xl font-display font-bold text-gray-800 festival-border inline-block pb-2">Festival Experiences</h2>
        </div>
        
        {% if posts %}
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                {% for post in posts %}
                    <div class="bg-white rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all festival-card relative">
                        <!-- Post Header -->
                        <div class="flex items-center p-4 border-b border-gray-100">
                            <div class="w-10 h-10 rounded-full bg-festival-secondary flex items-center justify-center text-white">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="ml-3">
                                <span class="font-medium text-gray-800">Festival Enthusiast</span>
                                <p class="text-xs text-gray-500">{{ post.timestamp.strftime('%B %d, %Y') if post.timestamp else 'Recent' }}</p>
                            </div>
                        </div>
                        
                        <!-- Post Media -->
                        {% if post.filename %}
                            <div class="w-full relative group overflow-hidden">
                                {% if post.filename.endswith(('jpg', 'jpeg', 'png', 'gif')) %}
                                    <img src="/static/uploads/{{ post.filename }}" alt="Festival image" class="w-full h-60 object-cover transition-transform duration-500 group-hover:scale-110">
                                    <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                {% elif post.filename.endswith(('mp4', 'mov', 'webm')) %}
                                    <video controls class="w-full h-60 object-cover">
                                        <source src="/static/uploads/{{ post.filename }}" type="video/{{ post.filename.split('.')[-1] }}">
                                        Your browser does not support the video tag.
                                    </video>
                                {% endif %}
                            </div>
                        {% endif %}
                        
                        <!-- Post Content -->
                        <div class="p-4">
                            <p class="text-gray-700 mb-4">{{ post.caption }}</p>
                            
                            <!-- Post Actions -->
                            <div class="flex items-center justify-between mt-4 pt-3 border-t border-gray-100">
                                <form action="/like/{{ post._id }}" method="post" class="inline">
                                    <button type="submit" class="flex items-center text-festival-primary hover:text-festival-orange transition">
                                        <i class="fas fa-fire mr-1"></i> 
                                        <span>{{ post.likes }}</span>
                                    </button>
                                </form>
                                
                                <a href="/post/{{ post._id }}" class="text-festival-accent hover:text-teal-700 transition">
                                    <i class="fas fa-comment mr-1"></i>
                                    <span>{{ post.comments|length }}</span>
                                </a>
                                
                                <a href="/post/{{ post._id }}" class="text-festival-dark hover:text-gray-700 transition">
                                    <i class="fas fa-external-link-alt mr-1"></i> View
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="hero-pattern bg-white rounded-xl p-10 text-center shadow-md">
                <div class="text-6xl mb-4 festival-icon">ðŸ“¸</div>
                <h3 class="text-xl font-semibold text-gray-800 mb-3">No festival moments shared yet</h3>
                <p class="text-gray-600 mb-6">Be the first to share your festival experience!</p>
                <a href="/upload" class="btn-festival flex items-center justify-center mx-auto">
                    <i class="fas fa-upload mr-2"></i> Share Your Moment
                </a>
            </div>
        {% endif %}
    </div>
    
    <!-- Sidebar -->
    <div class="lg:col-span-1">
        <!-- Popular Festivals -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6 transition-all hover:shadow-lg">
            <div class="flex items-center mb-4">
                <div class="text-xl text-festival-primary mr-2 festival-icon">ðŸ”¥</div>
                <h3 class="text-lg font-semibold text-gray-800">Popular Festivals</h3>
            </div>
            {% if popular_festivals %}
                <ul class="space-y-3">
                    {% for festival in popular_festivals %}
                        <li class="border-l-4 border-festival-secondary pl-3 hover:border-festival-primary transition">
                            <a href="/festival/{{ festival.name }}" class="text-gray-700 hover:text-festival-primary transition">
                                {{ festival.name|capitalize }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-gray-500 italic">No trending festivals yet</p>
            {% endif %}
        </div>
        
        <!-- Upcoming Festivals -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6 transition-all hover:shadow-lg">
            <div class="flex items-center mb-4">
                <div class="text-xl text-festival-primary mr-2 festival-icon">ðŸ“…</div>
                <h3 class="text-lg font-semibold text-gray-800">Upcoming Festivals</h3>
            </div>
            <ul class="space-y-3">
                <li class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 mr-3">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div>
                        <a href="/search?q=diwali" class="font-medium text-gray-800 hover:text-festival-primary transition">Diwali</a>
                        <p class="text-xs text-gray-500">November</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-500 mr-3">
                        <i class="fas fa-tree"></i>
                    </div>
                    <div>
                        <a href="/search?q=christmas" class="font-medium text-gray-800 hover:text-festival-primary transition">Christmas</a>
                        <p class="text-xs text-gray-500">December</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-500 mr-3">
                        <i class="fas fa-menorah"></i>
                    </div>
                    <div>
                        <a href="/search?q=hanukkah" class="font-medium text-gray-800 hover:text-festival-primary transition">Hanukkah</a>
                        <p class="text-xs text-gray-500">December</p>
                    </div>
                </li>
                <li class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-500 mr-3">
                        <i class="fas fa-glass-cheers"></i>
                    </div>
                    <div>
                        <a href="/search?q=new+year" class="font-medium text-gray-800 hover:text-festival-primary transition">New Year</a>
                        <p class="text-xs text-gray-500">January</p>
                    </div>
                </li>
            </ul>
        </div>
        
        <!-- Call-to-Action -->
        <div class="bg-gradient-to-br from-festival-secondary to-festival-orange rounded-xl shadow-lg p-6 text-white overflow-hidden relative hover:shadow-xl transition-all">
            <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10"></div>
            <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-10 -mb-10"></div>
            
            <div class="relative z-10">
                <div class="text-4xl mb-4 text-center festival-sparkle">ðŸ“·</div>
                <h3 class="text-xl font-semibold mb-2 text-center">Share Your Experience</h3>
                <p class="mb-4 text-center opacity-90">Got festival photos or videos to share with the community?</p>
                <a href="/upload" class="block w-full py-3 bg-white text-festival-orange rounded-xl font-medium text-center hover:bg-gray-100 transition shadow-md border border-white/20">
                    <i class="fas fa-upload mr-2"></i> Share Now
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_script %}
// Trigger confetti on page load for a festive feel
window.onload = function() {
    confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 },
        colors: ['#FF6B6B', '#FFD166', '#06D6A0', '#F76E11', '#9B5DE5']
    });
};
{% endblock %}
